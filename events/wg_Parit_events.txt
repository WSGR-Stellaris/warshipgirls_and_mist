namespace = wg_parit

#######################################
# ???
#######################################
event = {
	id = wg_parit.1
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		any_country = {
			OR = {
				has_authority = auth_warshipgirls
				has_authority = auth_shenhai
			}
			is_ai = no
		}
		NOT = { has_global_flag = wg_parit_created }
	}	
	immediate = {
		random_list = { 
			70 = {
				random_country = {
					limit = {
						OR = {
							has_authority = auth_warshipgirls
							has_authority = auth_shenhai
						}
						is_ai = no
					}
					country_event = { id = wg_parit.2 }
				}
			}
			30 = {
			}
		}
	}
}
country_event = {
	id = wg_parit.2
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		NOT = { has_global_flag = wg_parit_created }
	}	

	immediate = {
		set_global_flag = wg_parit_created
		capital_scope = {
			spawn_system = {
				hyperlane = yes
				min_jumps = 5
				max_jumps = 15
				initializer = Parit_system
			}
		}
	}
}


fleet_event = {
	id = wg_parit.3
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		From = {
			has_planet_flag = Parit_planet
		}
		NAND = {
			is_ship_class = shipclass_constructor
			is_ship_class = shipclass_science_ship
		}
	}

	immediate = {
		owner = {
			country_event = { id = wg_parit.4 days = 5 }
		}						
	}
}

country_event = {
	id = wg_parit.4
	title = wg_parit.4.name
	desc = wg_parit.4.desc
	picture = GFX_evt_wsg_no_video
	show_sound = event_red_alert
	location = event_target:Parit_fleet_target
	
	is_triggered_only = yes
	fire_only_once = yes
	
	immediate = {
		every_planet = {
			limit = {
				has_planet_flag = Parit_planet
			}
			save_event_target_as = Parit_fleet_target
		}
		create_country = {
			name = "NAME_Parit_fleet_country"
			type = faction_wsg
			flag = {
                icon = {
                    category = "warshipgirls"
                    file = "wg_flags_08.dds"
                }
                background= {
                    category = "backgrounds"
                    file = "circle.dds"
                }
                colors={
                    "dark_blue"
                    "green"
                    "null"
                    "null"
                }
            }			
			effect = {
				establish_communications_no_message = root.owner
				save_global_event_target_as = Parit_fleet_country
				set_country_flag = Parit_fleet_country_flag
			}
		}		
		create_fleet = {
			name = "NAME_parit_fleet"
			effect = {
				set_owner = event_target:Parit_fleet_country
				create_ship = {
					name = random
					design = "NAME_Defensive_C_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_C_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_C_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_C_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_C_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_C_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_C_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_B_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_B_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_B_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_B_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_B_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_B_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_B_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_B_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_B_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_B_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_B_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_B_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_B_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_B_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_B_SH"
					graphical_culture = "fallen_empire_03"
				}
				create_ship = {
					name = random
					design = "NAME_Defensive_B_SH"
					graphical_culture = "fallen_empire_03"
				}
				add_modifier = {
					modifier = sh_sanctuary_power3
					days = -1
				}				
				set_location = {
					target = event_target:Parit_fleet_target
					distance = 5
					angle = random
				}
			}
		}		
	}
	
	option = {
		name = "wg_parit.4.a"
	}	
}	

ship_event = {
	id = wg_parit.5
	title = "wg_parit.5.name"
	desc = "wg_parit.5.desc"

	is_triggered_only = yes
	picture = GFX_evt_wsg_no_video

	trigger = {
		FROM = {
			has_star_flag = wg_Parit_system
		}
		FROMFROM = {
			is_ai = no
			NOT = { has_country_flag = triggered_wg_Parit_event }
		}
	}

	immediate = {
		FROMFROM = {
			set_country_flag = triggered_wg_Parit_event
		}
	}

	option = {
		name = "wg_parit.5.a"
	}
}

country_event = {
	id = wg_parit.6
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		FROM = { is_country_type = default }
		FROMFROM = { has_planet_flag = Parit_planet }
		FROMFROM = { NOT = { has_planet_flag = Parit_planet } }
	}

	immediate = {
		FROM = {
			country_event = { id = wg_parit.7 days = 5 }
		}
	}
}

country_event = {
	id = wg_parit.7
	title = "wg_parit.7.name"
	desc = "wg_parit.7.desc"
	picture = GFX_evt_wsg_helldives
	
	is_triggered_only = yes
	
	option = {
		name = "wg_parit.7.a"
		hidden_effect = {
			country_event = { id = wg_parit.7 days = 10 }
		}
	}
}

country_event = {
	id = wg_parit.2333
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
	    every_country = {
			limit = {
				OR = {
					is_country_type = wg_crisis_country
					is_country_type = wg_crisis_sub_gate_country
				}
			}
			add_modifier = {
				modifier = uf_hidden_buff
				days = -1
			}			
		}
	}	
}

